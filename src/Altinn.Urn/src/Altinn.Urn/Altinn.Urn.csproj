<Project Sdk="Microsoft.NET.Sdk">

	<PropertyGroup>
		<GenerateNuspecDependsOn>_GetSourceGenerators;$(GenerateNuspecDependsOn)</GenerateNuspecDependsOn>
	</PropertyGroup>

  <ItemGroup>
		<SourceGenerator Include="..\Altinn.Urn.SourceGenerator\Altinn.Urn.SourceGenerator.csproj" />
	</ItemGroup>

	<ItemGroup>
		<ProjectReference Include="@(SourceGenerator)" 
			ReferenceOutputAssembly="false" 
			SetTargetFramework="TargetFramework=netstandard2.0"
			Private="true"
			OutputItemType="_SourceGeneratorPath" />
	</ItemGroup>

	<Target Name="_GetSourceGenerators">
		<ItemGroup>
			<NuGetPackInput Include="@(_SourceGeneratorPath)" />
			<_PackageFiles Include="@(_SourceGeneratorPath)">
				<BuildAction Condition="'%(SourceGenerator.BuildAction)' == ''">SourceGenerator</BuildAction>
				<PackagePath>analyzers/dotnet/cs</PackagePath>
			</_PackageFiles>
		</ItemGroup>
	</Target>

</Project>
